
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.2.3, mkdocs-material-8.1.3">
    
    
      
        <title>Blocking Crawlers and Malicious High-Traffic Hosts - Ops Runbooks for Fields</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.edf004c2.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.e6a45f82.min.css">
        
      
    
    
    
      
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../..",location),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="none" data-md-color-accent="none">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#blocking-crawlers-and-malicious-high-traffic-hosts" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Ops Runbooks for Fields" class="md-header__button md-logo" aria-label="Ops Runbooks for Fields" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Ops Runbooks for Fields
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Blocking Crawlers and Malicious High-Traffic Hosts
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/acquia/ops-runbook-fields.git/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Ops Runbooks for Fields" class="md-nav__button md-logo" aria-label="Ops Runbooks for Fields" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    Ops Runbooks for Fields
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/acquia/ops-runbook-fields.git/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        Welcome to Ops Runbooks for Fields
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../toc/" class="md-nav__link">
        Table of Contents
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3" type="checkbox" id="__nav_3" >
      
      
      
      
        <label class="md-nav__link" for="__nav_3">
          Escalation procedures
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Escalation procedures" data-md-level="1">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          Escalation procedures
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../escalation_procedures/" class="md-nav__link">
        Index
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4" type="checkbox" id="__nav_4" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_4">
          Incident response
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Incident response" data-md-level="1">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          Incident response
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../" class="md-nav__link">
        Alerts by Check Name
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Node.js-server-memory-nearing-threashold/" class="md-nav__link">
        Node.js server memory nearing threashold
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Node.js_degradeded_stack/" class="md-nav__link">
        Node.js Degraded stack alert
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../ah-config-iptables_locked/" class="md-nav__link">
        ah-config-iptables locked
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../ah-critical/" class="md-nav__link">
        Master AH_CRITICAL
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../ah-resource-mon/" class="md-nav__link">
        ah-resource-mon
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../alerts_pagerduty_outage/" class="md-nav__link">
        How to Survive During a Pagerduty Outage
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../backup_check/" class="md-nav__link">
        Backup Check
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../blocked_fcw_run/" class="md-nav__link">
        Blocked Fields Config Web Run alert
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../check_auditd/" class="md-nav__link">
        Check Auditd Agent
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../check_clamav/" class="md-nav__link">
        As a first step
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../check_filesystem_fencing/" class="md-nav__link">
        Check Filesystem Fencing alert
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../check_gluster_transport_endpoint_error/" class="md-nav__link">
        Check Gluster Transport endpoint error
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../check_perfmon_data_is_recent/" class="md-nav__link">
        Check perfmon data is recent
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../check_possible_hung_tasks/" class="md-nav__link">
        Check Possible Hung Tasks
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../check_ssl_certificate/" class="md-nav__link">
        Check SSL Certificate
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../critical_service_port_revoked/" class="md-nav__link">
        Critical Service Port Revoked
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../db_binlogs/" class="md-nav__link">
        MySQL binary log troubleshooting
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../dead_backup_tasks/" class="md-nav__link">
        Dead Backup Tasks
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../debugging_php/" class="md-nav__link">
        Debugging PHP
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../disk_partitions/" class="md-nav__link">
        Disk Partitions Alert
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../disk_writable/" class="md-nav__link">
        Disk Writable Alert
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../elb_issues/" class="md-nav__link">
        ELB Issues
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../fix-missing-glusterd_vol-file/" class="md-nav__link">
        Fix missing glusterd.vol file
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../gluster-not-split-brain/" class="md-nav__link">
        Not Split-brain
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../gluster-troubleshooting/" class="md-nav__link">
        Gluster Troubleshooting
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../impaired_server_relaunch/" class="md-nav__link">
        Relaunching impaired servers
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../index_ping_not_initiated/" class="md-nav__link">
        Sum Invocations LessThanThreshold 2.0 for FunctionName InitiateIndexCheck
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../instance_management_acp/" class="md-nav__link">
        ACP Instance Management
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../maintenance_past_due/" class="md-nav__link">
        Maintenance Past Due
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Blocking Crawlers and Malicious High-Traffic Hosts
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Blocking Crawlers and Malicious High-Traffic Hosts
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#synopsis" class="md-nav__link">
    Synopsis
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#identification-know-the-enemy" class="md-nav__link">
    Identification (Know The Enemy)
  </a>
  
    <nav class="md-nav" aria-label="Identification (Know The Enemy)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#sumologic" class="md-nav__link">
    SumoLogic
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#logstream-goaccess-site-traffic-and-site-trafficbyuseragent" class="md-nav__link">
    Logstream, GoAccess , Site-traffic and site-trafficbyuseragent
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#detection-inspect-the-enemy" class="md-nav__link">
    Detection (Inspect The Enemy)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#verification-question-the-enemy" class="md-nav__link">
    Verification (Question The Enemy)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mitigation-slay-the-enemy" class="md-nav__link">
    Mitigation (Slay The Enemy)
  </a>
  
    <nav class="md-nav" aria-label="Mitigation (Slay The Enemy)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#a-word-on-blocking-methodologies" class="md-nav__link">
    A word on blocking methodologies
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#criteria-for-when-to-block-via-vcl-or-iptables" class="md-nav__link">
    Criteria for when to block via VCL or iptables
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#blocking-an-ip-or-ip-range" class="md-nav__link">
    Blocking an IP or IP Range
  </a>
  
    <nav class="md-nav" aria-label="Blocking an IP or IP Range">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#blocking-via-htaccess-not-preferred-anymore" class="md-nav__link">
    Blocking via .htaccess (Not Preferred anymore)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#blocking-via-varnish-not-recommended" class="md-nav__link">
    Blocking via Varnish (Not Recommended)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#block-connections-using-iptables-recommended-for-ops" class="md-nav__link">
    Block Connections using iptables (Recommended for OPS)
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#blocking-an-useragent" class="md-nav__link">
    Blocking an Useragent
  </a>
  
    <nav class="md-nav" aria-label="Blocking an Useragent">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#block-connections-using-iptables" class="md-nav__link">
    Block Connections using iptables
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#verify-post-block-gloat-upon-the-enemys-grave" class="md-nav__link">
    Verify Post-Block (Gloat Upon The Enemy's Grave)
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../mon_server_host_count/" class="md-nav__link">
        Mon Server Host Count
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../monitoring_audit/" class="md-nav__link">
        Monitoring Audit
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../monthly_eip_audit/" class="md-nav__link">
        Handling monthly EIP audit tickets
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../multiregion_rsync_verification/" class="md-nav__link">
        MultiRegion Rsync Verification
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../mysql_available/" class="md-nav__link">
        MySQL Available
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../mysql_debian_sys_maint/" class="md-nav__link">
        MySQL Debian Sys Maint alert
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../mysql_failover/" class="md-nav__link">
        MySQL Failover
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../mysql_replication_lag/" class="md-nav__link">
        MySQL replication lag
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../nagios_configuration/" class="md-nav__link">
        Nagios Configuration
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../nginx_config_test/" class="md-nav__link">
        NGINX Configtest
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../nxephem_nginx/" class="md-nav__link">
        Nxephem Nginx Configtest
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../out_of_memory_errors/" class="md-nav__link">
        Out Of Memory (OOM) errors
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../perf_url_mon/" class="md-nav__link">
        Perf URL Mon Alert
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../pupgov/" class="md-nav__link">
        Pupgov Alerts Runbook
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../puppet_agent_disabled/" class="md-nav__link">
        Puppet Agent Disabled alert
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../puppet_agent_run_status/" class="md-nav__link">
        Puppet Agent Run Status
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../search_index_mon/" class="md-nav__link">
        Search Core Index Alerts
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../services_check/" class="md-nav__link">
        Services Check
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../site_capacity/" class="md-nav__link">
        Site Capacity alert
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../tomcat_memory_check/" class="md-nav__link">
        Tomcat Memory Check alert
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../tomcat_running/" class="md-nav__link">
        Tomcat Running alert
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../triage_unresponsive_servers/" class="md-nav__link">
        Triage unresponsive ACE, ACP, ACSF, Network, trex and [WMG/UMG]Gardens servers
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../tungsten_latency/" class="md-nav__link">
        Tungsten Latency
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../tungsten_online/" class="md-nav__link">
        Tungsten Online
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../tungsten_troubleshooting/" class="md-nav__link">
        Troubleshooting Tungsten
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../unmonitored_sites_check/" class="md-nav__link">
        Unmonitored Site Check alert
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../varnish_http/" class="md-nav__link">
        Check Varnish HTTP
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../vpn_connection/" class="md-nav__link">
        VPN Connection
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../vpn_mon/" class="md-nav__link">
        Name of Alert
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../web_audit/" class="md-nav__link">
        Web Audit
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4_62" type="checkbox" id="__nav_4_62" >
      
      
      
      
        <label class="md-nav__link" for="__nav_4_62">
          Host alert
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Host alert" data-md-level="2">
        <label class="md-nav__title" for="__nav_4_62">
          <span class="md-nav__icon md-icon"></span>
          Host alert
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../host_alert/fsdbmesh/" class="md-nav__link">
        fsdbmesh
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../host_alert/master/" class="md-nav__link">
        Master Down
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5" type="checkbox" id="__nav_5" >
      
      
      
      
        <label class="md-nav__link" for="__nav_5">
          Kanban tickets
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Kanban tickets" data-md-level="1">
        <label class="md-nav__title" for="__nav_5">
          <span class="md-nav__icon md-icon"></span>
          Kanban tickets
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../kanban_tickets/" class="md-nav__link">
        Kanban Tickets
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../kanban_tickets/1.81_release/" class="md-nav__link">
        1.81 Hosting Release
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../kanban_tickets/acquiamail/" class="md-nav__link">
        Acquiamail.acquia.com Dump Restore
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../kanban_tickets/acsf_deprovision/" class="md-nav__link">
        Site Factory Sitegroup Deprovisioning
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../kanban_tickets/acsf_proxy/" class="md-nav__link">
        Identify ACSF Follower and Proxy Environments
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../kanban_tickets/add_custom_proxy_conf/" class="md-nav__link">
        Add a custom Mod-Proxy file to a Site
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../kanban_tickets/add_remove_site_mon/" class="md-nav__link">
        Add/Remove Sites to/from Monitoring
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../kanban_tickets/add_remove_webs_from_rotation/" class="md-nav__link">
        Add/Remove Webs From Rotation
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../kanban_tickets/add_user/" class="md-nav__link">
        Bastion Provisioning
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../kanban_tickets/ahrabot/" class="md-nav__link">
        Modify the list of bastion users that can sudo ahrabot
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../kanban_tickets/arbitrary_php.ini_settings/" class="md-nav__link">
        Arbitrary php.ini settings
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../kanban_tickets/bastion_access/" class="md-nav__link">
        Bastion Access User Changes
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../kanban_tickets/bastion_troubleshooting/" class="md-nav__link">
        Troubleshooting
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../kanban_tickets/bulk_site_move/" class="md-nav__link">
        Bulk Site Move
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../kanban_tickets/bulk_site_php_edits/" class="md-nav__link">
        Bulk Site PHP Edits
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../kanban_tickets/capacity-limit/" class="md-nav__link">
        Edge Cluster Capacity limit
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../kanban_tickets/change_balancers_on_existing_environment/" class="md-nav__link">
        Change balancers on existing environment
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../kanban_tickets/change_db_password/" class="md-nav__link">
        Site Database Password Change
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../kanban_tickets/clamav/" class="md-nav__link">
        ClamAV Daemon
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../kanban_tickets/code_checkout_failures/" class="md-nav__link">
        Code Checkout Failures
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../kanban_tickets/configuring_hsd_for_sites/" class="md-nav__link">
        HSD (Higher Site Density)
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../kanban_tickets/core_dumps/" class="md-nav__link">
        Enable Coredumps for Capturing PHP Segfaults
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../kanban_tickets/create_test_balancer/" class="md-nav__link">
        Create a test balancer
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../kanban_tickets/custom_tungsten_settings/" class="md-nav__link">
        Custom Tungsten Settings
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../kanban_tickets/dedicated_hypervisor/" class="md-nav__link">
        Set tenancy for the servers
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../kanban_tickets/dedicated_memcache/" class="md-nav__link">
        Dedicated Memcache
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../kanban_tickets/delete_search_index/" class="md-nav__link">
        Deleting a Search Index
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../kanban_tickets/deploy_certificate/" class="md-nav__link">
        Deploying an SSL / TLS certificate to a balancer cluster
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../kanban_tickets/deploy_test_vcl/" class="md-nav__link">
        Deploy custom VCL for customer testing
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../kanban_tickets/deprovision_search_colony/" class="md-nav__link">
        Deprovision a Search Colony
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../kanban_tickets/deprovision_search_farm/" class="md-nav__link">
        Deprovision a Search Farm
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../kanban_tickets/deprovisioning_ace/" class="md-nav__link">
        Deprovisioning ACE & ACP
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../kanban_tickets/deprovisioning_mail_server/" class="md-nav__link">
        Deprovisoning a mail server
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../kanban_tickets/diagnostics/" class="md-nav__link">
        Diagnostics
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../kanban_tickets/disable_tls_version/" class="md-nav__link">
        Disable TLS versions
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../kanban_tickets/duplicate_certificates/" class="md-nav__link">
        Duplicate Certificates
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../kanban_tickets/edge_cluster/" class="md-nav__link">
        Edge Cluster
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../kanban_tickets/elb_creation/" class="md-nav__link">
        ELB Creation
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../kanban_tickets/email_blacklist/" class="md-nav__link">
        Acquia Email Server Blacklist Removal
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../kanban_tickets/enabling_mod_proxy/" class="md-nav__link">
        Enabling Mod-Proxy on a Site
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../kanban_tickets/enabling_xdebug/" class="md-nav__link">
        Enabling xdebug for a Site
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../kanban_tickets/extended_validation_certificates/" class="md-nav__link">
        Extended Validation Certificates
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../kanban_tickets/fix_livedev/" class="md-nav__link">
        Fixing/Enabling livedev
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../kanban_tickets/generating_csrs/" class="md-nav__link">
        Generating a Certificate Signing Request (CSR)
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../kanban_tickets/gluster-downgrade/" class="md-nav__link">
        Downgrade Gluster Version from 3.4 to 3.0
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../kanban_tickets/gluster-upgrade/" class="md-nav__link">
        Upgrade Gluster Version from 3.0 to 3.4
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../kanban_tickets/loadtest_balancer/" class="md-nav__link">
        Load Test Balancer
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../kanban_tickets/logforward/" class="md-nav__link">
        Log Forwarding
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../kanban_tickets/manage_end_to_end_encryption/" class="md-nav__link">
        Manage End To End Encryption
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../kanban_tickets/masterless_puppet/" class="md-nav__link">
        Masterless Puppet
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../kanban_tickets/move_customer_repo/" class="md-nav__link">
        Move Sitegroup Repo
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../kanban_tickets/move_provisioning_pointer/" class="md-nav__link">
        Moving the Index Provisioning Pointer
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../kanban_tickets/multi_region_failover_testing/" class="md-nav__link">
        Performing a Multi-Region Failover Test
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../kanban_tickets/multi_tier_to_full_tier/" class="md-nav__link">
        Multi-tier to Full-tier Upsize
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../kanban_tickets/multi_tier_to_single_tier/" class="md-nav__link">
        Multi-tier to Single-tier Downsize
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../kanban_tickets/mysql-daily-replication-fix/" class="md-nav__link">
        MySQL Daily Replication Fix
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../kanban_tickets/mysql_audit/" class="md-nav__link">
        Enabling or Disabling MySQL Auditing
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../kanban_tickets/mysql_upgrade_5733/" class="md-nav__link">
        MySQL / Percona Server 5.7.33 Upgrade
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../kanban_tickets/orphans/" class="md-nav__link">
        Orphans
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../kanban_tickets/overview/" class="md-nav__link">
        SSL Overview
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../kanban_tickets/point_in_time_recovery/" class="md-nav__link">
        MySQL Point in Time Recovery
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../kanban_tickets/preallocating_eips_for_webs/" class="md-nav__link">
        Preallocating EIPs for webs
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../kanban_tickets/provision_ace/" class="md-nav__link">
        Gather Information
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../kanban_tickets/provision_ace_customer/" class="md-nav__link">
        Provision customer hardware and sites
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../kanban_tickets/provision_ace_dedicated_cron/" class="md-nav__link">
        Dedicated Cron
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../kanban_tickets/provision_ace_empfree/" class="md-nav__link">
        Provisioning employee free sites
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../kanban_tickets/provision_ace_infra/" class="md-nav__link">
        Provision shared and infra hardware
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../kanban_tickets/provision_acp/" class="md-nav__link">
        Manually Provision a DevCloud Site & Server
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../kanban_tickets/provision_acsf/" class="md-nav__link">
        Site Factory provisioning
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../kanban_tickets/provision_bastion/" class="md-nav__link">
        Provisioning
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../kanban_tickets/provision_log_server/" class="md-nav__link">
        Log Servers
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../kanban_tickets/provision_multi_region/" class="md-nav__link">
        Multi-Region Provisioning
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../kanban_tickets/provision_search_colony/" class="md-nav__link">
        Provisioning a Search Colony
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../kanban_tickets/provision_search_farm/" class="md-nav__link">
        Provision a Search Farm
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../kanban_tickets/provision_site/" class="md-nav__link">
        Site Provision
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../kanban_tickets/provisioning_a_fedramp_site_with_acquia_shield/" class="md-nav__link">
        Provision FedRAMP Customer Site with Acquia Cloud Shield
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../kanban_tickets/provisioning_a_fedramp_site_without_acquia_shield/" class="md-nav__link">
        Provision FedRAMP Customer Site without Acquia Cloud Shield
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../kanban_tickets/provisioning_mail_server/" class="md-nav__link">
        Provisioning a mail server for Acquia Hosting Platform
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../kanban_tickets/puppet_master/" class="md-nav__link">
        Generating and updating the root CA cert for puppet master
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../kanban_tickets/regenerate_netrcs/" class="md-nav__link">
        Regenerating netrc Credentials
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../kanban_tickets/releasing_domains/" class="md-nav__link">
        Site Domains Management
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../kanban_tickets/remove_user/" class="md-nav__link">
        Deprovision User Access
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../kanban_tickets/renewing_certificates/" class="md-nav__link">
        Renewing SSL Certificates
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../kanban_tickets/renewing_puppet_master_cert/" class="md-nav__link">
        Renewing SSL cert for puppet master
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../kanban_tickets/resize_volumes_bastion/" class="md-nav__link">
        Modify volumes on bastions manually
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../kanban_tickets/restore_snapshot_on_new_hardware/" class="md-nav__link">
        Restore Snapshots on New Hardware (ACE)
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../kanban_tickets/restore_volumes/" class="md-nav__link">
        Restore Volume Backups
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../kanban_tickets/revert_ssl/" class="md-nav__link">
        Restoring an Acquia-Managed SSL Cert
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../kanban_tickets/root_cause_analysis/" class="md-nav__link">
        Root Cause Analysis Process
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../kanban_tickets/search_audit/" class="md-nav__link">
        Shared Search Audit
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../kanban_tickets/search_cert_update/" class="md-nav__link">
        Renewal ACM Certificates In Search Realm ELBs
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../kanban_tickets/search_index_migration/" class="md-nav__link">
        Search Index Migration
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../kanban_tickets/secondary_db_cluster/" class="md-nav__link">
        Provisioning of single-region secondary database cluster
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../kanban_tickets/self_service_ssl/" class="md-nav__link">
        Self-service SSL (on ELBs)
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../kanban_tickets/single_tier_to_multi_tier/" class="md-nav__link">
        Single-tier to Multi-tier Upsize
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../kanban_tickets/single_tier_to_multi_tier_manual/" class="md-nav__link">
        Single-tier to Multi-tier Upsize
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../kanban_tickets/site_audit/" class="md-nav__link">
        Performing a Site Audit
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../kanban_tickets/site_move/" class="md-nav__link">
        Site Move
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../kanban_tickets/sni_ssl/" class="md-nav__link">
        SNI Certificates (deployed to bals)
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../kanban_tickets/ssl_acm/" class="md-nav__link">
        AWS Certificate Manager
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../kanban_tickets/staging_single_tier_to_multi_tier_manual/" class="md-nav__link">
        Staging Single Tier to Multi-tier Upsize
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../kanban_tickets/svn_server_certificates/" class="md-nav__link">
        SVN Server Certificates
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../kanban_tickets/toc/" class="md-nav__link">
        Kanban Tickets
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../kanban_tickets/troubleshooting_bastion/" class="md-nav__link">
        Troubleshooting
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../kanban_tickets/troubleshooting_yubikey/" class="md-nav__link">
        Troubleshooting Yubikey
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../kanban_tickets/unblocking_email_service/" class="md-nav__link">
        Unblock Email Sending for a Customer
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../kanban_tickets/unique_multisite_hash_salt/" class="md-nav__link">
        Enabling Unique Multisite Hash Salt on a Site
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../kanban_tickets/update_colony_certificate/" class="md-nav__link">
        Update Search Colony Certificate
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../kanban_tickets/varnish_gather/" class="md-nav__link">
        VarnishGather
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../kanban_tickets/verify_extractor/" class="md-nav__link">
        Search Extractor
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../kanban_tickets/vpc_deprovision/" class="md-nav__link">
        Deprovision a VPC
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../kanban_tickets/vpc_network_boundaries/" class="md-nav__link">
        VPC Network Boundaries
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../kanban_tickets/vpc_provision/" class="md-nav__link">
        Provision a VPC
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../kanban_tickets/vpc_to_vpc/" class="md-nav__link">
        VPC to VPC  Migration
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../kanban_tickets/vpc_vpn_deprovision/" class="md-nav__link">
        Deprovision a Shield VPN
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../kanban_tickets/vpc_vpn_management/" class="md-nav__link">
        Updating Shield VPNs
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../kanban_tickets/vpc_vpn_provision/" class="md-nav__link">
        Provisioning a Shield VPN
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../kanban_tickets/wildcard_certificates/" class="md-nav__link">
        Wildcard Certificates
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5_119" type="checkbox" id="__nav_5_119" >
      
      
      
      
        <label class="md-nav__link" for="__nav_5_119">
          Dedicated bals
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Dedicated bals" data-md-level="2">
        <label class="md-nav__title" for="__nav_5_119">
          <span class="md-nav__icon md-icon"></span>
          Dedicated bals
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../kanban_tickets/dedicated_bals/dedicated_to_dedicated/" class="md-nav__link">
        Dedicated To Dedicated
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../kanban_tickets/dedicated_bals/dedicated_to_shared/" class="md-nav__link">
        Dedicated to Shared
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../kanban_tickets/dedicated_bals/shared_to_dedicated/" class="md-nav__link">
        Shared to Dedicated
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../kanban_tickets/dedicated_bals/shared_to_shared/" class="md-nav__link">
        Shared to Shared
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5_120" type="checkbox" id="__nav_5_120" >
      
      
      
      
        <label class="md-nav__link" for="__nav_5_120">
          Test vcl
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Test vcl" data-md-level="2">
        <label class="md-nav__title" for="__nav_5_120">
          <span class="md-nav__icon md-icon"></span>
          Test vcl
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../kanban_tickets/test_vcl/automated/" class="md-nav__link">
        Test VCL Deployment - Automated
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../kanban_tickets/test_vcl/manual/" class="md-nav__link">
        Test VCL Deployment - MANUAL
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_6" type="checkbox" id="__nav_6" >
      
      
      
      
        <label class="md-nav__link" for="__nav_6">
          Ops infrastructure
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Ops infrastructure" data-md-level="1">
        <label class="md-nav__title" for="__nav_6">
          <span class="md-nav__icon md-icon"></span>
          Ops infrastructure
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../ops_infrastructure/" class="md-nav__link">
        Ops Infrastructure
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../ops_infrastructure/alerts/" class="md-nav__link">
        alerts.ops.acquia.com
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../ops_infrastructure/compiling_ah_check_http/" class="md-nav__link">
        Compiling nagios plugin check_http for mon2
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../ops_infrastructure/gordon_deploy/" class="md-nav__link">
        OPS-Gordon Deployment
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../ops_infrastructure/gordon_prod_issues/" class="md-nav__link">
        OPS-Gordon Production Troubleshooting
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../ops_infrastructure/oneoffs/" class="md-nav__link">
        General Information About One-Off Servers
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../ops_infrastructure/perfmon/" class="md-nav__link">
        perf-mon.ops.acquia.com
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7" type="checkbox" id="__nav_7" >
      
      
      
      
        <label class="md-nav__link" for="__nav_7">
          Ops reference
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Ops reference" data-md-level="1">
        <label class="md-nav__title" for="__nav_7">
          <span class="md-nav__icon md-icon"></span>
          Ops reference
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../ops_reference/" class="md-nav__link">
        Ops Reference
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../ops_reference/deploy_secrets_masterless/" class="md-nav__link">
        Deploying secrets with Masterless Puppet
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../ops_reference/scp/" class="md-nav__link">
        SCP
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../ops_reference/services_overview/" class="md-nav__link">
        Overview of Common Services
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../ops_reference/ssh_between_servers/" class="md-nav__link">
        SSHing Between Servers
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../ops_reference/ssh_search_jumpbox/" class="md-nav__link">
        Search Jumpboxes
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../ops_reference/strace/" class="md-nav__link">
        Using `strace`
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_8" type="checkbox" id="__nav_8" >
      
      
      
      
        <label class="md-nav__link" for="__nav_8">
          Realm management
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Realm management" data-md-level="1">
        <label class="md-nav__title" for="__nav_8">
          <span class="md-nav__icon md-icon"></span>
          Realm management
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../realm_management/" class="md-nav__link">
        Realm Management
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../realm_management/audit_data_backup/" class="md-nav__link">
        Audit Data Backup Log
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../realm_management/audit_iptables_sgroups/" class="md-nav__link">
        Audit IPtables Security Groups
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../realm_management/audit_services_protocols_ports/" class="md-nav__link">
        Audit Services Protocols Ports
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../realm_management/audit_sudoers/" class="md-nav__link">
        Audit Sudoers
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../realm_management/audit_user_access/" class="md-nav__link">
        User Access Audit
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../realm_management/mntfs-volume-reaping/" class="md-nav__link">
        Reaping of Unused `/mnt` EBS Volumes
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../realm_management/mysql_restarts/" class="md-nav__link">
        MySQL Restart Mass Process
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../realm_management/patching/" class="md-nav__link">
        Mass patching
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../realm_management/provision_new_region/" class="md-nav__link">
        Provision New Region
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../realm_management/qna_on_reboot_relaunches/" class="md-nav__link">
        Frequently Asked Questions on Reboots and Relaunches
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../realm_management/reboot_balancers/" class="md-nav__link">
        Reboot Bals Using Workflow
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../realm_management/reboot_master/" class="md-nav__link">
        Reboot a Master
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../realm_management/reboot_search/" class="md-nav__link">
        Mass Rebooting Search Servers
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../realm_management/rebooting_aws/" class="md-nav__link">
        Mass patching using AWS method
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../realm_management/rebooting_relaunching/" class="md-nav__link">
        Mass Rebooting and Relaunching Procedure
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../realm_management/relaunch/" class="md-nav__link">
        Relaunch Instances
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../realm_management/relaunch_backup/" class="md-nav__link">
        Backup Server
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../realm_management/relaunch_balancers/" class="md-nav__link">
        Relaunch Bals Using Workflow
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../realm_management/relaunch_master/" class="md-nav__link">
        Relaunch a Master
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../realm_management/relaunch_master_manual/" class="md-nav__link">
        Relaunch a Master (manual process)
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../realm_management/relaunch_search/" class="md-nav__link">
        Mass Relaunching Search Servers
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../realm_management/site_config_changes/" class="md-nav__link">
        Bulk config settings changes
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../realm_management/volume_relaunch_fix/" class="md-nav__link">
        Volume Relaunch Fix
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_8_25" type="checkbox" id="__nav_8_25" >
      
      
      
      
        <label class="md-nav__link" for="__nav_8_25">
          Procedures
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Procedures" data-md-level="2">
        <label class="md-nav__title" for="__nav_8_25">
          <span class="md-nav__icon md-icon"></span>
          Procedures
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../realm_management/procedures/backup/" class="md-nav__link">
        Reboot Backup Servers
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../realm_management/procedures/balancer/" class="md-nav__link">
        Balancer Mass Reboots / Relaunches
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../realm_management/procedures/cplane/" class="md-nav__link">
        Control Plane
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../realm_management/procedures/custom_servers/" class="md-nav__link">
        Custom servers (`custom`)
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../realm_management/procedures/databases/" class="md-nav__link">
        Database Mass Reboot/Relaunch
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../realm_management/procedures/fs/" class="md-nav__link">
        Filesystem Server Mass Reboot/Relaunch
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../realm_management/procedures/manual_databases/" class="md-nav__link">
        Databases (dbmaster, ded, fsdb)
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../realm_management/procedures/manual_fs/" class="md-nav__link">
        Filesystem Server Mass Reboot/Relaunch - Manual
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../realm_management/procedures/manual_webs/" class="md-nav__link">
        Manual Reboot or Relaunch Webs(`api`, `web`)
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../realm_management/procedures/non_ha/" class="md-nav__link">
        Customer Non-HA Servers (`free`, `srv`, `staging`, `api`)
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../realm_management/procedures/reboot_node_servers/" class="md-nav__link">
        Rebooting node/nodebal servers
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../realm_management/procedures/relaunch_node_servers/" class="md-nav__link">
        Relaunching node/nodebal servers
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../realm_management/procedures/task/" class="md-nav__link">
        Task Servers
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../realm_management/procedures/tungsten/" class="md-nav__link">
        Multiregion Database Mass Reboot/Relaunch
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../realm_management/procedures/webs/" class="md-nav__link">
        Webs (`web`)
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../realm_management/procedures/workflow_errors/" class="md-nav__link">
        Dealing with Workflow errors
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_9" type="checkbox" id="__nav_9" >
      
      
      
      
        <label class="md-nav__link" for="__nav_9">
          Runbook metadocs
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Runbook metadocs" data-md-level="1">
        <label class="md-nav__title" for="__nav_9">
          <span class="md-nav__icon md-icon"></span>
          Runbook metadocs
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../runbook_metadocs/" class="md-nav__link">
        Runbook Metadocs
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../runbook_metadocs/contribution/" class="md-nav__link">
        Welcome to Contributing to Ops Runbooks for Fields
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../runbook_metadocs/style/" class="md-nav__link">
        Ops Runbook (Fields) Style Guide
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_10" type="checkbox" id="__nav_10" >
      
      
      
      
        <label class="md-nav__link" for="__nav_10">
          Secondary response
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Secondary response" data-md-level="1">
        <label class="md-nav__title" for="__nav_10">
          <span class="md-nav__icon md-icon"></span>
          Secondary response
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../secondary_response/" class="md-nav__link">
        Secondary Response
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../secondary_response/cpu_wait/" class="md-nav__link">
        Diagnosing CPU Wait problems
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../secondary_response/db_error_lock_wait_timeout/" class="md-nav__link">
        MySQL lock_wait_timeout errors
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../secondary_response/disable_acp_sales/" class="md-nav__link">
        Disable DevCloud Purchases
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../secondary_response/dump_restore_all/" class="md-nav__link">
        Dump Restore All Tungsten Hosts
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../secondary_response/dump_restore_single/" class="md-nav__link">
        Dump Restore A Single Tungsten Slave
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../secondary_response/dump_restore_workflow/" class="md-nav__link">
        MySQL Dump Restore Workflow
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../secondary_response/fencing/" class="md-nav__link">
        Fencing
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../secondary_response/fix-1970-timestamps/" class="md-nav__link">
        Fix 1970 timestamps for files
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../secondary_response/mysql_service_issue_during_volume_resize/" class="md-nav__link">
        Fix MySQL service issue occured during volume resize
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../secondary_response/mysql_startup_failures/" class="md-nav__link">
        MySQL Startup Failure Troubleshooting
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../secondary_response/pt-kill/" class="md-nav__link">
        pt-kill
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../secondary_response/reduce_sf_mysql_disk_usage/" class="md-nav__link">
        Reduce Site Factory MySQL Disk Usage
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../secondary_response/replacing-brick-volumes/" class="md-nav__link">
        Replacing Brick Volumes
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../secondary_response/replacing-bricks/" class="md-nav__link">
        Replacing Gluster Bricks
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../secondary_response/search_disk_partitions/" class="md-nav__link">
        Search Disk Partitions Alert
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../secondary_response/split-brain/" class="md-nav__link">
        Split-brain
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../secondary_response/tungsten_administration/" class="md-nav__link">
        General Administration
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../secondary_response/xtrabackup/" class="md-nav__link">
        Xtrabackup Dump Restore
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_11" type="checkbox" id="__nav_11" >
      
      
      
      
        <label class="md-nav__link" for="__nav_11">
          Standard maintenance
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Standard maintenance" data-md-level="1">
        <label class="md-nav__title" for="__nav_11">
          <span class="md-nav__icon md-icon"></span>
          Standard maintenance
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../standard_maintenance/" class="md-nav__link">
        Standard Maintenance
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../standard_maintenance/audit_shared_bal_pairs/" class="md-nav__link">
        Audit Shared Bal Pairs
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../standard_maintenance/az_migration/" class="md-nav__link">
        AZ Migration
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../standard_maintenance/az_migration_manual/" class="md-nav__link">
        Manual AZ Migration
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../standard_maintenance/az_migration_manual_volume_m/" class="md-nav__link">
        AZ Migration (xvdm)
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../standard_maintenance/az_migration_manual_volume_mn/" class="md-nav__link">
        AZ Migration (xvdm xvdn)
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../standard_maintenance/az_migration_manual_volume_mno/" class="md-nav__link">
        AZ Migration (xvdm xvdn xvdo)
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../standard_maintenance/az_migration_manual_volume_no/" class="md-nav__link">
        AZ Migration (xvdn xvdo)
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../standard_maintenance/fedramp_relaunch/" class="md-nav__link">
        Relaunching into FedRAMP compliance VPC
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../standard_maintenance/fips-140-2/" class="md-nav__link">
        FIPS 140-2 compliant instance management
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../standard_maintenance/moving_a_fedramp_site_with_acquia_shield/" class="md-nav__link">
        Moving a FedRAMP Site with Acquia Cloud Shield
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../standard_maintenance/moving_a_fedramp_site_without_acquia_shield/" class="md-nav__link">
        Moving a FedRAMP Site without Acquia Cloud Shield
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../standard_maintenance/relaunch_bastion/" class="md-nav__link">
        Relaunching
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../standard_maintenance/replace_volumes/" class="md-nav__link">
        Replacing a Bad Volume Manually
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../standard_maintenance/resize_volumes/" class="md-nav__link">
        Resize volumes
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../standard_maintenance/resize_volumes_manual/" class="md-nav__link">
        Resize volumes manually
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_11_17" type="checkbox" id="__nav_11_17" >
      
      
      
      
        <label class="md-nav__link" for="__nav_11_17">
          Fips 140 2
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Fips 140 2" data-md-level="2">
        <label class="md-nav__title" for="__nav_11_17">
          <span class="md-nav__icon md-icon"></span>
          Fips 140 2
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../standard_maintenance/fips-140-2/fips_check/" class="md-nav__link">
        Check whether a server is already FIPS compliant
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../standard_maintenance/fips-140-2/fips_disable/" class="md-nav__link">
        Disable FIPS
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../standard_maintenance/fips-140-2/fips_enable/" class="md-nav__link">
        Enable FIPS
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../standard_maintenance/fips-140-2/fips_migrate_db/" class="md-nav__link">
        Enable FIPS on DB servers
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../standard_maintenance/fips-140-2/fips_mysql_upgrade/" class="md-nav__link">
        Upgrading mysql tier to be FIPS 140-2 compliant
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../standard_maintenance/fips-140-2/fips_provision/" class="md-nav__link">
        FIPS 140-2 compliant server provisioning
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#synopsis" class="md-nav__link">
    Synopsis
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#identification-know-the-enemy" class="md-nav__link">
    Identification (Know The Enemy)
  </a>
  
    <nav class="md-nav" aria-label="Identification (Know The Enemy)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#sumologic" class="md-nav__link">
    SumoLogic
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#logstream-goaccess-site-traffic-and-site-trafficbyuseragent" class="md-nav__link">
    Logstream, GoAccess , Site-traffic and site-trafficbyuseragent
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#detection-inspect-the-enemy" class="md-nav__link">
    Detection (Inspect The Enemy)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#verification-question-the-enemy" class="md-nav__link">
    Verification (Question The Enemy)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mitigation-slay-the-enemy" class="md-nav__link">
    Mitigation (Slay The Enemy)
  </a>
  
    <nav class="md-nav" aria-label="Mitigation (Slay The Enemy)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#a-word-on-blocking-methodologies" class="md-nav__link">
    A word on blocking methodologies
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#criteria-for-when-to-block-via-vcl-or-iptables" class="md-nav__link">
    Criteria for when to block via VCL or iptables
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#blocking-an-ip-or-ip-range" class="md-nav__link">
    Blocking an IP or IP Range
  </a>
  
    <nav class="md-nav" aria-label="Blocking an IP or IP Range">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#blocking-via-htaccess-not-preferred-anymore" class="md-nav__link">
    Blocking via .htaccess (Not Preferred anymore)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#blocking-via-varnish-not-recommended" class="md-nav__link">
    Blocking via Varnish (Not Recommended)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#block-connections-using-iptables-recommended-for-ops" class="md-nav__link">
    Block Connections using iptables (Recommended for OPS)
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#blocking-an-useragent" class="md-nav__link">
    Blocking an Useragent
  </a>
  
    <nav class="md-nav" aria-label="Blocking an Useragent">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#block-connections-using-iptables" class="md-nav__link">
    Block Connections using iptables
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#verify-post-block-gloat-upon-the-enemys-grave" class="md-nav__link">
    Verify Post-Block (Gloat Upon The Enemy's Grave)
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                
<a href="https://github.com/acquia/ops-runbook-fields.git/edit/master/docs/incident_response/malicious_high_traffic_hosts.md" title="Edit this page" class="md-content__button md-icon">
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg>
</a>


<h1 id="blocking-crawlers-and-malicious-high-traffic-hosts">Blocking Crawlers and Malicious High-Traffic Hosts</h1>
<h2 id="synopsis">Synopsis</h2>
<p>A customer site may encounter high traffic from one or more high-traffic or
malicious hosts. Generally this involves HTTP or HTTPS requests against:</p>
<ul>
<li>Varnish (bal)</li>
<li>Nginx (bal)</li>
<li>Apache (web/ded)</li>
</ul>
<p>Often these events result in an Acquia site becoming unavailable. This document
assists in diagnosing and mitigating this scenario.</p>
<h2 id="identification-know-the-enemy">Identification (Know The Enemy)</h2>
<p>Ops currently leverages a couple different technologies to stream and review
incoming requests to various logs. Most tools currently key off of <em>site</em> rather
than <em>host</em> or <em>server</em>, so be sure to take this into account when you are
looking at shared infrastructure such as shared balancers or deds/webs with
multiple sites deployed to them.</p>
<h3 id="sumologic">SumoLogic</h3>
<p><a href="https://service.sumologic.com/ui/dashboard.html?f=64174506&amp;t=r">A SumoLogic dashboard</a>
exists to help provide Apache access log information that includes:</p>
<ul>
<li>HTTP Response Codes</li>
<li>HTTP Methods (GET, POST, etc.)</li>
<li>Originating IPs (X-Forwarded-For is included)</li>
<li>User Agents</li>
</ul>
<p>The filter button in the top right of the dashboard allows users to specify the
fields site name that they wish to view apache traffic for.</p>
<pre><code>TODO: Document queries to take site and server names to provide data.
TODO: Create dashboard(s) that will take queries of this type and visualize it.
</code></pre>
<h3 id="logstream-goaccess-site-traffic-and-site-trafficbyuseragent">Logstream, GoAccess , Site-traffic and site-trafficbyuseragent</h3>
<p>Currently, <code>logstream</code> , <code>goaccess</code> and <code>site-traffic</code> are the primary tools that Ops can use to
identify high-traffic hosts to a given site. <code>logstream</code> is used to stream logs
to a temporary location (usually <code>/mnt/tmp/</code> on the bastion).</p>
<p><code>site-traffic</code> tool is used by Ops to easily check if there is a malicious IP making a lot of requests on the site or a potential DDOS. It looks at the apache access logs from Sumo to get its results.</p>
<p><code>site-trafficbyuseragent</code> tool is used by Ops to easily check the top 10 Useragents, sending traffic to the site over last 60 minutes. It looks at the apache access logs from one of the active web servers and gives the information about general trend of Useragent traffic.</p>
<p><code>goaccess</code> is one of the primary tools that Ops can use to visualize log
data in a way that can be read in real-time. In order to expedite the process of
viewing a given site's logs, wrappers have been introduced to <code>ops-misc</code> that
make this process easier:</p>
<pre><code>    $ site-logstream
    Usage: site-logstream SITE TYPE
    Supported TYPE: nginx varnish apache apache-error fpm-access fpm-error

    $ site-goaccess
    Usage: site-goaccess /path/to/log/file

    $ site-traffic
    Usage: site-traffic SITE

    $ site-trafficbyuseragent
    Usage: site-trafficbyuseragent SITE
           site-trafficbyuseragent SERVER
</code></pre>
<h2 id="detection-inspect-the-enemy">Detection (Inspect The Enemy)</h2>
<p>If a given IP, IP range, or User Agent is making requests at an order of
magnitude larger than any other, this may likely be the culprit.</p>
<h2 id="verification-question-the-enemy">Verification (Question The Enemy)</h2>
<p>To verify that this is in fact a crawler or malicious host:</p>
<ul>
<li>Contact Support to determine if the customer is doing a load test. If so, that
traffic is legitimate and should be left alone.</li>
<li>Do a reverse lookup on the IP address using <code>whois</code> or <code>dig</code>. If the IP range
belongs to a known organization such as Google, Bing, or Yahoo, the customer can
modify and deploy <code>robots.txt</code> to their docroot to mitigate this.</li>
<li>Does the <code>whois</code> information for the malicious IP or IP range come from a
questionable source such as China or Nigeria? Does it originate from a single
datacenter such as <code>OVH</code>?</li>
<li>Inspect the HTTP requests directly from the IP or range in question. Does it
include random query strings or does it appear to be attempting an exploit?</li>
<li>Inspect <code>varnishtop</code>.  Is there a user-agent or URL that is being requested
more than any others?</li>
<li>Discuss with support about the malicious looking IPs and Useragents ; and act on IPs and Useragents requested by  support .</li>
</ul>
<p><strong>NOTE</strong> : As noted in <a href="https://confluence.acquia.com/display/OP/Ops+FAQ">OPS FAQ</a> , Ops will block up to five (5) ip addresses and/or browser user-agents one (1) time at the load balancer layer for customers with <strong>dedicated</strong> load balancers. Read OPS FAQ for details.</p>
<h2 id="mitigation-slay-the-enemy">Mitigation (Slay The Enemy)</h2>
<h3 id="a-word-on-blocking-methodologies">A word on blocking methodologies</h3>
<p>Blocking IP ranges via .htaccess is the recommended method of mitigation, but
other methods such as VCL blocking and iptables rules are listed for historical
completeness.</p>
<p>Support has the ability via Remote Admin (RA) to modify customer .htaccess
rules and block abusive IP ranges, UserAgents, and other unique identifiers of
abusive traffic/requests. If at all possible, Support should be engaged first
and allowed time to create the requisite rules.</p>
<p>If the impacted customer does not have RA, is on shared hardware, and is
unresponsive to Support contact, escalate to a senior Ops Team Member or Ops
Management immediately.</p>
<h3 id="criteria-for-when-to-block-via-vcl-or-iptables">Criteria for when to block via VCL or iptables</h3>
<ul>
<li>Support is unable to raise the customer or modify .htaccess directly (RA
customers)</li>
<li>Support or the customer are unable to implement a WAF such as CloudFlare,
Akamai, or DOSArrest</li>
<li>The balancers are <strong>dedicated</strong> to the specific customer impacted</li>
<li>The abusive traffic can be effectively stopped by a single modification to VCL
or iptables</li>
</ul>
<h3 id="blocking-an-ip-or-ip-range">Blocking an IP or IP Range</h3>
<h4 id="blocking-via-htaccess-not-preferred-anymore">Blocking via .htaccess (Not Preferred anymore)</h4>
<p>Support can edit or direct customers to edit <code>.htaccess</code> and block IPs using
<code>AH_CLIENT_IP</code> and <code>REMOTE_ADDR</code>.</p>
<ul>
<li><a href="https://docs.acquia.com/acquia-cloud/arch/security/restrict/">Customer-Facing Documentation</a></li>
<li><a href="https://confluence.acquia.com/display/support/Block+a+specific+IP+address">Support Documentation on Confluence</a></li>
<li>Example block:<pre><code># Match a specific IP address or Range
SetEnvIf AH_CLIENT_IP "^185\.241\.170\.*" Deny_Host
SetEnvIf REMOTE_ADDR "^185\.241\.170\.*" Deny_Host
Deny from env=Deny_Host
</code></pre>
</li>
</ul>
<h4 id="blocking-via-varnish-not-recommended">Blocking via Varnish (Not Recommended)</h4>
<p><strong>NOTE</strong>: This method of blocking is not to be used on shared balancers unless
specifically approved by a member of Ops Management.</p>
<p>NOTE: Blocking IPs <strong>does not work if a customer is using an ELB in front of an
impacted domain or site</strong>, as the IP(s) of the ELB instances will be referenced
in logs rather than the origin of the request(s).</p>
<ol>
<li>
<p>Gather information using <code>varnishtop</code> on the active balancer.</p>
<ul>
<li>
<p>Which User Agent is requesting pages?</p>
<pre><code>varnishtop -C -I ReqHeader:User-Agent
</code></pre>
</li>
<li>
<p>What site is being requested? (Host)</p>
<pre><code>varnishtop -C -I ReqHeader:Host
</code></pre>
</li>
<li>
<p>What is the "Accept-Language" of the request?</p>
<pre><code>varnishtop -C -I ReqHeader:Accept-Language
</code></pre>
</li>
<li>
<p>What is the most Requested URL?</p>
<pre><code>varnishtop -i ReqURL
</code></pre>
</li>
<li>
<p>Who is this request being forwarded for? (Incoming from ELBs, CDNs, etc.)</p>
<pre><code>varnishtop -C -I ReqHeader:X-Forwarded-For
</code></pre>
</li>
<li>
<p>RxProtocol HTTP/1.0 (Requested HTTP Protocol)</p>
<pre><code>varnishtop -i RxProtocol
</code></pre>
</li>
</ul>
</li>
<li>
<p>If required, craft a VCL to block the requisite traffic via Varnish.</p>
<ul>
<li>
<p>Disable puppet on the active bal, make a note with <code>ah-runbook</code>, and
notify Support.</p>
<pre><code>YOUR_USER= # your fields username, example: "jgoin"
JIRA=
MESSAGE="$YOUR_USER - $JIRA - disable puppet for VCL block"
puppet agent --disable "$MESSAGE"
ah-runbook "$MESSAGE"
</code></pre>
</li>
<li>
<p>Block using the method identified in the above step.</p>
<pre><code># Temporary block accept-language for OP-XXXXX
  if (req.http.Accept-Language ~ "zh-CN") {
    std.syslog(180, "OP-XXXXX block");
    error 404 "Not Found";
  }
# End OP-XXXXX

# Temporary block user-agent for OP-XXXXX
  if (req.http.User-Agent ~ "SV1") {
    std.syslog(180, "OP-XXXXX block");
    error 404 "Not Found";
  }
# End OP-XXXXX

# Temporary block url for OP-XXXXX
  if (req.http.url ~ "PATH") {
    std.syslog(180, "OP-XXXXX block");
    error 404 "Not Found";
  }
# End OP-XXXXX
</code></pre>
</li>
<li>
<p>Check VCL compilation status.</p>
<pre><code>varnishd -C -f /etc/varnish/default.vcl
</code></pre>
</li>
<li>
<p>If the above command exits with "0", <em>RELOAD</em> and <strong>DO NOT RESTART</strong> Varnish.</p>
<pre><code>service varnish reload
</code></pre>
</li>
</ul>
</li>
<li>
<p>Once the event is over, re-enable Puppet and revert your changes.</p>
<pre><code>puppet agent --enable
puppet agent --test
</code></pre>
</li>
</ol>
<h4 id="block-connections-using-iptables-recommended-for-ops">Block Connections using iptables (Recommended for OPS)</h4>
<p><strong>NOTE:</strong> We can block the UA/IP if site is severly impacted and customer would be taking time to block the IP through .htaccess. Refer <a href="https://confluence.acquia.com/display/OP/Ops+FAQ">OPS FAQ</a> for permitted limit of IP/UA blockings using iptables.</p>
<p><strong>NOTE:</strong> Blocking IPs <strong>does not work if a customer is using an ELB in front of an
impacted domain or site</strong>, as the IP(s) of the ELB instances will be referenced
in logs rather than the origin of the request(s).</p>
<p><strong>NOTE:</strong> We can block the IP's on Dedicated EDGE clusters as well using below steps. This is tested in <a href="https://backlog.acquia.com/browse/EDGE-73">EDGE-73</a> and confirmed to work on edge clusters.</p>
<p><strong>WARNING:</strong> Setting no-config-iptables will prevent the sites balancers talking to any web that gets relaunched. It will also prevent memcache talking to any relaunched webs that has memcache running.</p>
<p>We have limited monitoring for this feature so it can be left on accidentally for long periods of time and cause difficult to diagnose site outages.</p>
<p>It's recommended not to use no-config-iptables for short term blocking as the iptables rules will probably persist well enough - but it can be set to assure customers in the short term that their block will hold if they will not be doing additional blocking themselves, eg in a CDN.</p>
<ol>
<li>
<p>To ensure iptables rules persist and are not wiped out by callback tasks, touch a file.</p>
<pre><code>touch /var/acquia/no-config-iptables
</code></pre>
</li>
<li>
<p>Using the information above, determine the correct method of blocking.</p>
<ul>
<li>
<p>For single IPs:</p>
<pre><code>iptables -I INPUT 1 -s [lol.lol.lol.lol] -j DROP
</code></pre>
</li>
<li>
<p>For an entire IP range (CIDR block notation):</p>
<pre><code>iptables -I INPUT 1 -s [lol.lol.lol.lol]/24 -j DROP
</code></pre>
</li>
</ul>
</li>
<li>
<p>Execute the method of blocking determined above against the appropriate host.</p>
</li>
<li>
<p>Check for remaining connections on the host.</p>
<pre><code>netstat -ta | grep [BAD_IP]
</code></pre>
</li>
<li>
<p>If connections remain, use <code>cutter</code> to remove those connections.</p>
<pre><code># @TODO: Remove this when CL-16933 is completed.
apt-get update &amp;&amp; apt-get install cutter -y
modprobe ip_conntrack
cutter [BAD_IP]
</code></pre>
</li>
<li>
<p>In cases where the above does not remove remaining connections, block
outbound connections to the bad IP or IP range as well.</p>
<pre><code>iptables -I OUTPUT -d [BAD_IP|BAD_IP_RANGE/24] -j DROP
</code></pre>
</li>
<li>
<p>Verify with <code>netstat</code> that connections have been blocked.</p>
<pre><code>netstat -ta | grep [BAD_IP]
</code></pre>
</li>
<li>
<p>If required, escalate within the Ops team to the next available senior team
member.</p>
</li>
<li>
<p>Create a TSR to clear the lock file and run <code>ah-config-iptables</code>. Schedule the TSR to go on the Kanban board in 24 hours.</p>
<pre><code>fpdsh -l $SERVERS -c 'sudo rm /var/acquia/no-config-iptables; sudo ah-config-iptables'
</code></pre>
</li>
<li>
<p>After blocking with iptables, wait at least 5 minutes then confirm the rule is being hit. Example below:</p>
<pre><code> root@bal-3446.prod:~# iptables -vnL
 Chain INPUT (policy DROP 12 packets, 937 bytes)
 pkts bytes target     prot opt in     out     source            destination
 0     0 DROP       all  --  *      *       78.169.162.147       0.0.0.0/0
 0     0 DROP       all  --  *      *       78.169.162.147       0.0.0.0/0
 0     0 DROP       all  --  *      *       85.211.170.32        0.0.0.0/0
 0     0 DROP       all  --  *      *       85.211.170.32        0.0.0.0/0
</code></pre>
<p>In this case, none of these DROP rules have been hit (the first two columns are all zeros). So you may as well remove them</p>
<pre><code>fpdsh -l $SERVERS -c 'sudo rm /var/acquia/no-config-iptables; sudo ah-config-iptables'
</code></pre>
</li>
<li>
<p>If the iptables DROP rules are being hit, leave the rule in place and create a TSR to remove the block rule after 24 hours.</p>
<pre><code>fpdsh -l $SERVERS -c 'sudo rm /var/acquia/no-config-iptables; sudo ah-config-iptables'
</code></pre>
</li>
</ol>
<h3 id="blocking-an-useragent">Blocking an Useragent</h3>
<h4 id="block-connections-using-iptables">Block Connections using iptables</h4>
<p><strong>WARNING:</strong> setting no-config-iptables will prevent the sites balancers talking to any web that gets relaunched. It will also prevent memcache talking to any relaunched webs that has memcache running.</p>
<p>We have limited monitoring for this feature so it can be left on accidentally for long periods of time and cause difficult to diagnose site outages.</p>
<p>It's recommended not to use no-config-iptables for short term blocking as the iptables rules will probably persist well enough - but it can be set to assure customers in the short term that their block will hold if they will not be doing additional blocking themselves, eg in a CDN</p>
<ol>
<li>
<p>Using the information derived from <code>site-trafficbyuseragent</code> tool and from the decision derived from discussion with support, identify the useragent to be blocked.</p>
</li>
<li>
<p>To ensure iptables rules persist and are not wiped out by callback tasks, touch a file.</p>
<pre><code>touch /var/acquia/no-config-iptables
</code></pre>
</li>
</ol>
<p>NOTE: Refer <a href="https://confluence.acquia.com/display/OP/Ops+FAQ">OPS FAQ</a> for permitted limit of IP/UA blockings using iptables.</p>
<ol>
<li>
<p>For each Dedicated BALANCER of the site take the following step:</p>
<ul>
<li>
<p>For each USERAGENT (to be blocked):</p>
<pre><code>sudo iptables -I INPUT -p tcp --dport 80 -m string --algo bm --string "USERAGENT" -j DROP
</code></pre>
</li>
<li>
<p>Verify that the blocking shows up in the iptables:</p>
<pre><code>sudo iptables -L
</code></pre>
</li>
<li>
<p>After blocking with iptables, wait at least 5 minutes then confirm the rule is being hit.</p>
<pre><code>iptables -vnL
</code></pre>
</li>
<li>
<p>In this case, none of these DROP rules have been hit. So you may as well remove them.</p>
<pre><code>rm /var/acquia/no-config-iptables
sudo ah-config-iptables
</code></pre>
</li>
</ul>
</li>
<li>
<p>Check the logs, to observe the drop in traffic from useragent. Confirm that the traffic from intended Useragent is not hitting the servers anymore.</p>
</li>
<li>
<p>File a TSR for 24 hours later, to unblock the useragent by refreshing the iptables on the dedicated BALANCERS.</p>
<ul>
<li>
<p>You can mention the following command in the TSR.</p>
<pre><code>rm /var/acquia/no-config-iptables
sudo ah-config-iptables
</code></pre>
</li>
<li>
<p>Also mention, for the TSR executer, to verify that the blocking rule is removed from the iptables.</p>
</li>
</ul>
</li>
</ol>
<h2 id="verify-post-block-gloat-upon-the-enemys-grave">Verify Post-Block (Gloat Upon The Enemy's Grave)</h2>
<ul>
<li>
<p>Check your log streaming and monitoring tools to ensure the block was successful.</p>
</li>
<li>
<p>Ensure the connections are gone if not ask support to block via .htaccess or Cloudflare(in case customer is using).</p>
</li>
<li>
<p>Roll php to remove the existing connections.</p>
<pre><code>  site-restartfpm $SITENAME
</code></pre>
</li>
<li>
<p>Escalate to cloud if issue persists despite blocking and service restarts.</p>
</li>
</ul>

              
            </article>
          </div>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    <nav class="md-footer__inner md-grid" aria-label="Footer">
      
        
        <a href="../maintenance_past_due/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Maintenance Past Due" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              Maintenance Past Due
            </div>
          </div>
        </a>
      
      
        
        <a href="../mon_server_host_count/" class="md-footer__link md-footer__link--next" aria-label="Next: Mon Server Host Count" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              Mon Server Host Count
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "../..", "features": [], "translations": {"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing", "select.version.title": "Select version"}, "search": "../../assets/javascripts/workers/search.0bbba5b5.min.js"}</script>
    
    
      <script src="../../assets/javascripts/bundle.e1a181d9.min.js"></script>
      
    
  </body>
</html>